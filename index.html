<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ABè½‰æŠ˜è¨ˆç®—å™¨</title>
    <style>
        /* ç°¡æ½”ç¾è§€çš„CSS */
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .input-group {
            margin: 20px 0;
        }
        input {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            border: 2px solid #4CAF50;
            border-radius: 8px;
            background: #2a2a2a;
            color: #fff;
        }
        button {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        .result {
            margin: 20px 0;
            padding: 15px;
            background: #2a2a2a;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
        .up { border-left-color: #f44336; }
        .down { border-left-color: #2196F3; }
    </style>
</head>
<body>
    <h1>ğŸ“Š ABè½‰æŠ˜è¨ˆç®—å™¨</h1>
    
    <div class="input-group">
        <label>Aé»ï¼ˆé«˜é»ï¼‰ï¼š</label>
        <input type="number" id="pointA" placeholder="è¼¸å…¥Aé»" step="0.1">
    </div>
    
    <div class="input-group">
        <label>Bé»ï¼ˆä½é»ï¼‰ï¼š</label>
        <input type="number" id="pointB" placeholder="è¼¸å…¥Bé»" step="0.1">
    </div>
    
    <button onclick="calculate()">ğŸ”¥ è¨ˆç®—</button>
    
    <div id="results"></div>
    
    <script>
        function calculate() {
            const A = parseFloat(document.getElementById('pointA').value);
            const B = parseFloat(document.getElementById('pointB').value);
            
            if (!A || !B) {
                alert('è«‹è¼¸å…¥Aå’ŒBé»ï¼');
                return;
            }
            
            // è¨ˆç®—å¹¾ä½•ç´šæ•¸
            const C_up = (A * A) / B;
            const D_up = (C_up * C_up) / A;
            const E_up = (D_up * D_up) / C_up;
            const F_up = (E_up * E_up) / D_up;
            const G_up = (F_up * F_up) / E_up;
            
            const C_down = (B * B) / A;
            const D_down = (C_down * C_down) / B;
            const E_down = (D_down * D_down) / C_down;
            const F_down = (E_down * E_down) / D_down;
            const G_down = (F_down * F_down) / E_down;
            
            // è¨ˆç®—æ–æ³¢é‚£å¥‘æ‰©å±•ï¼ˆå‡è¨­Bç‚ºå›èª¿é»ï¼‰
            const fib_ext_618 = B + (A - B) * 0.618;
            const fib_ext_100 = B + (A - B) * 1.0;
            const fib_ext_1618 = B + (A - B) * 1.618;
            const fib_ext_200 = B + (A - B) * 2.0;
            const fib_ext_2618 = B + (A - B) * 2.618;
            
            // è¨ˆç®—åƒ¹æ ¼é€šé“ï¼ˆåŸºæ–¼é«˜ä½é»çš„ä¸­è»¸å’Œé€šé“ï¼‰
            const mid_point = (A + B) / 2; // ä¸­è»¸é»
            const channel_width = (A - B) * 0.2; // é€šé“å¯¬åº¦ç‚ºåƒ¹å·®çš„20%
            const upper_channel = mid_point + channel_width; // ä¸Šé€šé“ç·š
            const lower_channel = mid_point - channel_width; // ä¸‹é€šé“ç·š
            
            // è¨ˆç®—é»ƒé‡‘åˆ‡å‰²
            const diff = A - B;
            const golden_up_1 = A + (diff * 0.191);
            const golden_up_2 = A + (diff * 0.236);
            const golden_up_3 = A + (diff * 0.382);
            const golden_up_4 = A + (diff * 0.5);
            const golden_up_5 = A + (diff * 0.618);
            const golden_up_6 = A + (diff * 0.786);
            
            const golden_down_1 = B - (diff * 0.191);
            const golden_down_2 = B - (diff * 0.236);
            const golden_down_3 = B - (diff * 0.382);
            const golden_down_4 = B - (diff * 0.5);
            const golden_down_5 = B - (diff * 0.618);
            const golden_down_6 = B - (diff * 0.786);
            
            // æ”¶é›†æ‰€æœ‰è¨ˆç®—å‡ºçš„åƒ¹ä½
            const allPrices = [
                {name: 'C_up', value: C_up},
                {name: 'D_up', value: D_up},
                {name: 'E_up', value: E_up},
                {name: 'F_up', value: F_up},
                {name: 'G_up', value: G_up},
                {name: 'C_down', value: C_down},
                {name: 'D_down', value: D_down},
                {name: 'E_down', value: E_down},
                {name: 'F_down', value: F_down},
                {name: 'G_down', value: G_down},
                {name: 'golden_up_191', value: golden_up_1},
                {name: 'golden_up_236', value: golden_up_2},
                {name: 'golden_up_382', value: golden_up_3},
                {name: 'golden_up_500', value: golden_up_4},
                {name: 'golden_up_618', value: golden_up_5},
                {name: 'golden_up_786', value: golden_up_6},
                {name: 'golden_down_191', value: golden_down_1},
                {name: 'golden_down_236', value: golden_down_2},
                {name: 'golden_down_382', value: golden_down_3},
                {name: 'golden_down_500', value: golden_down_4},
                {name: 'golden_down_618', value: golden_down_5},
                {name: 'golden_down_786', value: golden_down_6},
                {name: 'fib_ext_618', value: fib_ext_618},
                {name: 'fib_ext_100', value: fib_ext_100},
                {name: 'fib_ext_1618', value: fib_ext_1618},
                {name: 'fib_ext_200', value: fib_ext_200},
                {name: 'fib_ext_2618', value: fib_ext_2618},
                {name: 'mid_point', value: mid_point},
                {name: 'upper_channel', value: upper_channel},
                {name: 'lower_channel', value: lower_channel}
            ];
            
            // åˆ†æç›¸è¿‘åƒ¹ä½ï¼ˆç›¸å·®åœ¨1%ä»¥å…§ï¼‰
            const similarPrices = [];
            const threshold = Math.abs(diff) * 0.01; // 1%çš„åƒ¹å·®ä½œç‚ºé–¾å€¼
            
            for (let i = 0; i < allPrices.length; i++) {
                for (let j = i + 1; j < allPrices.length; j++) {
                    const price1 = allPrices[i];
                    const price2 = allPrices[j];
                    const priceDiff = Math.abs(price1.value - price2.value);
                    
                    if (priceDiff <= threshold) {
                        similarPrices.push({
                            price1: {name: getPriceDisplayName(price1.name), value: price1.value},
                            price2: {name: getPriceDisplayName(price2.name), value: price2.value},
                            difference: priceDiff,
                            differencePercent: (priceDiff / Math.min(price1.value, price2.value) * 100).toFixed(2)
                        });
                    }
                }
            }
            
            // é¡¯ç¤ºçµæœ
            document.getElementById('results').innerHTML = `
                <div class="result up">
                    <h2>ğŸ“ˆ å¾€ä¸Šå£“åŠ›ä½ï¼ˆå¹¾ä½•ç´šæ•¸ï¼‰</h2>
                    <p>C: ${C_up.toFixed(2)}</p>
                    <p>D: ${D_up.toFixed(2)}</p>
                    <p>E: ${E_up.toFixed(2)}</p>
                    <p>F: ${F_up.toFixed(2)}</p>
                    <p>G: ${G_up.toFixed(2)}</p>
                </div>
                
                <div class="result" style="border-left-color: #FF9800;">
                    <h2>ğŸ“Š æ–æ³¢é‚£å¥‘æ‰©å±•ä½</h2>
                    <p>61.8%: ${fib_ext_618.toFixed(2)}</p>
                    <p>100%: ${fib_ext_100.toFixed(2)}</p>
                    <p>161.8%: ${fib_ext_1618.toFixed(2)}</p>
                    <p>200%: ${fib_ext_200.toFixed(2)}</p>
                    <p>261.8%: ${fib_ext_2618.toFixed(2)}</p>
                    <p class="mt-2 text-sm text-gray-300">ğŸ’¡ åŸºæ–¼Aé»ï¼ˆé«˜é»ï¼‰å’ŒBé»ï¼ˆå›èª¿é»ï¼‰è¨ˆç®—</p>
                </div>
                
                <div class="result" style="border-left-color: #9C27B0;">
                    <h2>ğŸ›£ï¸ åƒ¹æ ¼é€šé“ä½</h2>
                    <p>ä¸­è»¸é»: ${mid_point.toFixed(2)}</p>
                    <p>ä¸Šé€šé“ç·š: ${upper_channel.toFixed(2)}</p>
                    <p>ä¸‹é€šé“ç·š: ${lower_channel.toFixed(2)}</p>
                    <p class="mt-2 text-sm text-gray-300">ğŸ’¡ é€šé“å¯¬åº¦ç‚ºé«˜ä½é»åƒ¹å·®çš„20%</p>
                </div>
                
                <div class="result down">
                    <h2>ğŸ“‰ å¾€ä¸‹æ”¯æ’ä½ï¼ˆå¹¾ä½•ç´šæ•¸ï¼‰</h2>
                    <p>C: ${C_down.toFixed(2)}</p>
                    <p>D: ${D_down.toFixed(2)}</p>
                    <p>E: ${E_down.toFixed(2)}</p>
                    <p>F: ${F_down.toFixed(2)}</p>
                    <p>G: ${G_down.toFixed(2)}</p>
                </div>
                
                <div class="result up">
                    <h2>ğŸ¯ é»ƒé‡‘åˆ‡å‰²ï¼ˆå¾€ä¸Šï¼‰</h2>
                    <p>0.191: ${golden_up_1.toFixed(2)}</p>
                    <p>0.236: ${golden_up_2.toFixed(2)}</p>
                    <p>0.382: ${golden_up_3.toFixed(2)}</p>
                    <p>0.5: ${golden_up_4.toFixed(2)}</p>
                    <p>0.618: ${golden_up_5.toFixed(2)}</p>
                    <p>0.786: ${golden_up_6.toFixed(2)}</p>
                </div>
                
                <div class="result down">
                    <h2>ğŸ¯ é»ƒé‡‘åˆ‡å‰²ï¼ˆå¾€ä¸‹ï¼‰</h2>
                    <p>0.191: ${golden_down_1.toFixed(2)}</p>
                    <p>0.236: ${golden_down_2.toFixed(2)}</p>
                    <p>0.382: ${golden_down_3.toFixed(2)}</p>
                    <p>0.5: ${golden_down_4.toFixed(2)}</p>
                    <p>0.618: ${golden_down_5.toFixed(2)}</p>
                    <p>0.786: ${golden_down_6.toFixed(2)}</p>
                </div>
                
                <div class="result" style="border-left-color: #9C27B0;">
                    <h2>ğŸ” åƒ¹ä½ç›¸è¿‘æ€§åˆ†æ</h2>
                    ${similarPrices.length > 0 ? `
                        <p>âš ï¸ ç™¼ç¾ <strong>${similarPrices.length}</strong> çµ„ç›¸è¿‘åƒ¹ä½ï¼ˆç›¸å·®åœ¨1%ä»¥å…§ï¼‰ï¼š</p>
                        <ul>
                            ${similarPrices.map(pair => `
                                <li>${pair.price1.name} (${pair.price1.value.toFixed(2)}) èˆ‡ ${pair.price2.name} (${pair.price2.value.toFixed(2)}) - ç›¸å·® ${pair.difference.toFixed(2)} (${pair.differencePercent}%)</li>
                            `).join('')}
                        </ul>
                        <p class="mt-2">ğŸ’¡ <strong>åˆ†æå»ºè­°ï¼š</strong> é€™äº›ç›¸è¿‘çš„åƒ¹ä½å¯èƒ½å½¢æˆå¼·å¤§çš„æ”¯æ’æˆ–å£“åŠ›å€åŸŸï¼Œå€¼å¾—ç‰¹åˆ¥é—œæ³¨ã€‚</p>
                    ` : `
                        <p>âœ… æœªç™¼ç¾ç›¸è¿‘çš„åƒ¹ä½ï¼ˆç›¸å·®åœ¨1%ä»¥å…§ï¼‰ã€‚</p>
                    `}
                </div>
                

            `;
        }
        
        // è¼”åŠ©å‡½æ•¸ï¼šç²å–åƒ¹ä½çš„é¡¯ç¤ºåç¨±
        function getPriceDisplayName(priceKey) {
            const nameMap = {
                'C_up': 'å¾€ä¸Šå£“åŠ›ä½C',
                'D_up': 'å¾€ä¸Šå£“åŠ›ä½D',
                'E_up': 'å¾€ä¸Šå£“åŠ›ä½E',
                'F_up': 'å¾€ä¸Šå£“åŠ›ä½F',
                'G_up': 'å¾€ä¸Šå£“åŠ›ä½G',
                'C_down': 'å¾€ä¸‹æ”¯æ’ä½C',
                'D_down': 'å¾€ä¸‹æ”¯æ’ä½D',
                'E_down': 'å¾€ä¸‹æ”¯æ’ä½E',
                'F_down': 'å¾€ä¸‹æ”¯æ’ä½F',
                'G_down': 'å¾€ä¸‹æ”¯æ’ä½G',
                'golden_up_191': 'é»ƒé‡‘åˆ‡å‰²å¾€ä¸Š0.191',
                'golden_up_236': 'é»ƒé‡‘åˆ‡å‰²å¾€ä¸Š0.236',
                'golden_up_382': 'é»ƒé‡‘åˆ‡å‰²å¾€ä¸Š0.382',
                'golden_up_500': 'é»ƒé‡‘åˆ‡å‰²å¾€ä¸Š0.5',
                'golden_up_618': 'é»ƒé‡‘åˆ‡å‰²å¾€ä¸Š0.618',
                'golden_up_786': 'é»ƒé‡‘åˆ‡å‰²å¾€ä¸Š0.786',
                'golden_down_191': 'é»ƒé‡‘åˆ‡å‰²å¾€ä¸‹0.191',
                'golden_down_236': 'é»ƒé‡‘åˆ‡å‰²å¾€ä¸‹0.236',
                'golden_down_382': 'é»ƒé‡‘åˆ‡å‰²å¾€ä¸‹0.382',
                'golden_down_500': 'é»ƒé‡‘åˆ‡å‰²å¾€ä¸‹0.5',
                'golden_down_618': 'é»ƒé‡‘åˆ‡å‰²å¾€ä¸‹0.618',
                'golden_down_786': 'é»ƒé‡‘åˆ‡å‰²å¾€ä¸‹0.786',
                'fib_ext_618': 'æ–æ³¢é‚£å¥‘æ‰©å±•61.8%',
                'fib_ext_100': 'æ–æ³¢é‚£å¥‘æ‰©å±•100%',
                'fib_ext_1618': 'æ–æ³¢é‚£å¥‘æ‰©å±•161.8%',
                'fib_ext_200': 'æ–æ³¢é‚£å¥‘æ‰©å±•200%',
                'fib_ext_2618': 'æ–æ³¢é‚£å¥‘æ‰©å±•2618%',
                'mid_point': 'åƒ¹æ ¼é€šé“ä¸­è»¸é»',
                'upper_channel': 'åƒ¹æ ¼é€šé“ä¸Šè»Œ',
                'lower_channel': 'åƒ¹æ ¼é€šé“ä¸‹è»Œ'
            };
            
            return nameMap[priceKey] || priceKey;
        }
        
        // å¿«æ·éµï¼šæŒ‰Enterè¨ˆç®—
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                calculate();
            }
        });
    </script>
</body>
</html>
